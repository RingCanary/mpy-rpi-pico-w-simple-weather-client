# Pi5 Weather Station Hub Configuration
# Copy to .env and fill in values

# ============================================
# DATABASE (required)
# ============================================
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/telemetry

# ============================================
# SERVER
# ============================================
HOST=0.0.0.0
PORT=8000

# Optional API key for device authentication
# Set this to require X-API-Key header on /ingest
API_KEY=

# ============================================
# SLACK ALERTS (optional)
# ============================================
SLACK_WEBHOOK_URL=

# ============================================
# GOOGLE SHEETS (optional)
# ============================================
GOOGLE_SERVICE_ACCOUNT_JSON=/path/to/service-account.json
GOOGLE_SHEETS_SPREADSHEET_ID=

# Alternative: Google Apps Script webapp URL for hourly reports
# If set, hourly reports are sent via Apps Script instead of direct Sheets API
# APPS_SCRIPT_WEBAPP_URL=https://script.google.com/macros/s/xxx/exec

# ============================================
# ALERT SETTINGS
# ============================================
INACTIVITY_MINUTES=5
ALERT_COOLDOWN_MINUTES=30
HVAC_TEMP_THRESHOLD=25.0
HVAC_ALERT_COOLDOWN_MINUTES=30

# Number of consecutive stale checks required before alerting
# Higher values reduce false positives from brief network issues
STALE_CONSECUTIVE_MISSES=4

# Comma-separated list of device IDs to monitor
REQUIRED_DEVICES=

# ============================================
# SCHEDULER
# ============================================
MONITOR_INTERVAL_MINUTES=1
REPORT_INTERVAL_HOURS=1

# ============================================
# DEVICE FLASHING (scripts/flash.py)
# ============================================

# Wi-Fi credentials (flashed to microcontroller)
WIFI_SSID=your_wifi_network_name
WIFI_PASSWORD=your_wifi_password

# Device identity
DEVICE_ID=pico_w_1

# Optional per-target overrides used by scripts/flash.py
# PICO_W_DEVICE_ID=pico_w_1
# ESP32_C6_DEVICE_ID=esp32_c6_1

# Optional per-target Wi-Fi overrides
# PICO_W_WIFI_SSID=your_wifi_network_name
# PICO_W_WIFI_PASSWORD=your_wifi_password
# ESP32_C6_WIFI_SSID=your_wifi_network_name
# ESP32_C6_WIFI_PASSWORD=your_wifi_password

# API URL for device to report to
# Default: http://pi5.local:8000/ingest
API_URL=http://pi5.local:8000/ingest

# Sampling interval on device (seconds)
SAMPLE_INTERVAL=60
